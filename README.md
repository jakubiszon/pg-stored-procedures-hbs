# pg-stored-procedures-hbs
This is a templates module that can be used together with [json2src](https://github.com/jakubiszon/json2src)
to produce postgresql stored procedures using data generated by [table2json](https://github.com/jakubiszon/table2json)

## Procedures
The procedures created by this template:
 - list - returns all rows
 - get - gets a single row by the primary key
 - insert - inserts a new row
 - update - updates one row matched by the primary key
 - delete - deletes one row matched by the primary key
 - list by FK - a proceure listing all rows which reference the specified foreign key, one for each FK
 - delete by KF - a proceure deleting all rows which reference the specified foreign key, one for each FK
 - find by unique key - a procedure finding a row specified by the unique key, one for each key

## Usage
An example of how to use this template is shown in `example/index.js` file.
To run the example:
  - update the `example/db.json` file which specifies the database to work with
  - adjust the `schema_name` variable in `example/index.js` to reference the right schema
  - run `npm install` in the example directory
  - run `node index.js` in the example directory
  - the output files will be placed in `example/output` and table definitions in `example/output-json`

Note that it is the example program which references [json2src](https://github.com/jakubiszon/json2src) and [table2json](https://github.com/jakubiszon/table2json).
